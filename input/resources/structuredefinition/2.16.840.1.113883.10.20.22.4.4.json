<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="2.16.840.1.113883.10.20.22.4.4" />
  <url value="http://hl7.org/cda/us/ccda/StructureDefinition/2.16.840.1.113883.10.20.22.4.4" />
  <identifier>
    <value value="urn:hl7ii:2.16.840.1.113883.10.20.22.4.4:2022-06-01" />
  </identifier>
  <version value="2022-06-01" />
  <name value="Problem Observation (V4)" />
  <status value="active" />
  <publisher value="WaveOne Associates" />
  <contact>
    <name value="Brett Marquard" />
    <telecom>
      <system value="phone" />
      <value value="4135496886" />
      <use value="work" />
    </telecom>
    <telecom>
      <system value="email" />
      <value value="brett@waveoneassociates.com" />
      <use value="work" />
    </telecom>
  </contact>
  <description value="This template reflects a discrete observation about a patient's problem. Because it is a discrete observation, it will have a statusCode of &quot;completed&quot;. The effectiveTime, also referred to as the clinically relevant time is the time at which the observation holds for the patient. For a provider seeing a patient in the clinic today, observing a history of heart attack that occurred five years ago, the effectiveTime is five years ago. &#xA;&#xA;The effectiveTime of the Problem Observation is the definitive indication of whether or not the underlying condition is resolved. If the problem is known to be resolved, then an effectiveTime/high would be present. If the date of resolution is not known, then effectiveTime/high will be present with a nullFlavor of &quot;UNK&quot;." />
  <kind value="resource" />
  <abstract value="false" />
  <type value="Observation" />
  <baseDefinition value="http://hl7.org/cda/us/ccda/StructureDefinition/2.16.840.1.113883.10.20.22.4.4" />
  <derivation value="constraint" />
  <differential>
    <element id="Observation">
      <path value="Observation" />
    </element>
    <element id="Observation.classCode">
      <path value="Observation.classCode" />
      <short value="classCode" />
      <definition value="SHALL contain exactly one [1..1] @classCode=&quot;OBS&quot; Observation (CodeSystem: HL7ActClass urn:oid:2.16.840.1.113883.5.6 STATIC) (CONF:4515-9041)." />
      <min value="1" />
      <max value="1" />
      <patternString value="OBS" />
    </element>
    <element id="Observation.moodCode">
      <path value="Observation.moodCode" />
      <short value="moodCode" />
      <definition value="SHALL contain exactly one [1..1] @moodCode=&quot;EVN&quot; Event (CodeSystem: HL7ActMood urn:oid:2.16.840.1.113883.5.1001 STATIC) (CONF:4515-9042)." />
      <min value="1" />
      <max value="1" />
      <patternString value="EVN" />
    </element>
    <element id="Observation.negationInd">
      <path value="Observation.negationInd" />
      <short value="negationInd" />
      <definition value="MAY contain zero or one [0..1] @negationInd (CONF:4515-10139)." />
      <min value="0" />
      <max value="1" />
    </element>
    <element id="Observation.templateId">
      <path value="Observation.templateId" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="root" />
        </discriminator>
        <discriminator>
          <type value="value" />
          <path value="extension" />
        </discriminator>
        <rules value="open" />
      </slicing>
      <definition value="SHALL contain exactly one [1..1] templateId (CONF:4515-14926) such that it" />
    </element>
    <element id="Observation.templateId:templateId1">
      <path value="Observation.templateId" />
      <sliceName value="templateId1" />
      <short value="templateId" />
      <definition value="SHALL contain exactly one [1..1] templateId (CONF:4515-14926) such that it" />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Observation.templateId:templateId1.root">
      <path value="Observation.templateId.root" />
      <sliceName value="templateId1" />
      <short value="root" />
      <definition value="SHALL contain exactly one [1..1] @root=&quot;2.16.840.1.113883.10.20.22.4.4&quot; (CONF:4515-14927)." />
      <min value="1" />
      <max value="1" />
      <patternString value="2.16.840.1.113883.10.20.22.4.4" />
    </element>
    <element id="Observation.templateId:templateId1.extension">
      <path value="Observation.templateId.extension" />
      <sliceName value="templateId1" />
      <short value="extension" />
      <definition value="SHALL contain exactly one [1..1] @extension=&quot;2022-06-01&quot; (CONF:4515-32508)." />
      <min value="1" />
      <max value="1" />
      <patternString value="2022-06-01" />
    </element>
    <element id="Observation.id">
      <path value="Observation.id" />
      <short value="id" />
      <definition value="SHALL contain at least one [1..*] id (CONF:4515-9043)." />
      <min value="1" />
      <max value="*" />
    </element>
    <element id="Observation.code">
      <path value="Observation.code" />
      <short value="code" />
      <definition value="SHALL contain exactly one [1..1] code, which SHOULD be selected from ValueSet Problem Type (SNOMEDCT) urn:oid:2.16.840.1.113883.3.88.12.3221.7.2 DYNAMIC (CONF:4515-9045)." />
      <min value="1" />
      <max value="1" />
      <constraint>
        <key value="4515-32950" />
        <severity value="error" />
        <human value="If code is selected from ValueSet Problem Type (SNOMEDCT) urn:oid:2.16.840.1.113883.3.88.12.3221.7.2 **DYNAMIC**, then it **SHALL** have at least one [1..*] translation, which **SHOULD** be selected from ValueSet Problem Type (LOINC) urn:oid:2.16.840.1.113762.1.4.1099.28 **DYNAMIC** (CONF:1198-32950) (CONF:4515-32950)." />
      </constraint>
      <binding>
        <strength value="preferred" />
        <valueSet value="https://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.88.12.3221.7.2" />
      </binding>
    </element>
    <element id="Observation.statusCode">
      <path value="Observation.statusCode" />
      <short value="statusCode" />
      <definition value="SHALL contain exactly one [1..1] statusCode (CONF:4515-9049)." />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Observation.statusCode.code">
      <path value="Observation.statusCode.code" />
      <short value="code" />
      <definition value="This statusCode SHALL contain exactly one [1..1] @code=&quot;completed&quot; Completed (CodeSystem: HL7ActStatus urn:oid:2.16.840.1.113883.5.14 STATIC) (CONF:4515-19112)." />
      <min value="1" />
      <max value="1" />
      <patternString value="completed" />
    </element>
    <element id="Observation.effectiveTime">
      <path value="Observation.effectiveTime" />
      <short value="effectiveTime" />
      <definition value="SHALL contain exactly one [1..1] effectiveTime (CONF:4515-9050)." />
      <min value="1" />
      <max value="1" />
      <constraint>
        <key value="4515-32964" />
        <severity value="error" />
        <human value="When an observation/value code concept name has a temporal aspect, ensure that observation/effectiveTime/value aligns with the temporal aspect of the code. Most often, a single time is appropriate, rather than low and high values. An example SNOMED CT code is 714093000 | Sexually active in last six months (finding) (CONF:4515-32964)." />
      </constraint>
    </element>
    <element id="Observation.effectiveTime.low">
      <path value="Observation.effectiveTime.low" />
      <short value="low" />
      <definition value="This effectiveTime SHALL contain exactly one [1..1] low (CONF:4515-15603)." />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Observation.effectiveTime.high">
      <path value="Observation.effectiveTime.high" />
      <short value="high" />
      <definition value="This effectiveTime MAY contain zero or one [0..1] high (CONF:4515-15604)." />
      <min value="0" />
      <max value="1" />
    </element>
    <element id="Observation.value">
      <path value="Observation.value" />
      <short value="value" />
      <definition value="SHALL contain exactly one [1..1] value with @xsi:type=&quot;CD&quot;, where the code SHOULD be selected from ValueSet Problem urn:oid:2.16.840.1.113883.3.88.12.3221.7.4 DYNAMIC (CONF:4515-9058)." />
      <min value="1" />
      <max value="1" />
      <binding>
        <strength value="preferred" />
        <valueSet value="https://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.88.12.3221.7.4" />
      </binding>
    </element>
    <element id="Observation.value.code">
      <path value="Observation.value.code" />
      <short value="code" />
      <definition value="This value MAY contain zero or one [0..1] @code (CONF:4515-31871)." />
      <min value="0" />
      <max value="1" />
      <constraint>
        <key value="4515-32951" />
        <severity value="error" />
        <human value="When the Problem is Social Determinant of Health Observation, the observation/value **SHOULD** be a SNOMED code selected from ValueSet  [Social Determinant of Health Conditions 2.16.840.1.113762.1.4.1196.788](https://vsac.nlm.nih.gov/valueset/2.16.840.1.113762.1.4.1196.788/expansion)  **DYNAMIC** (CONF:4515-32951)." />
      </constraint>
    </element>
    <element id="Observation.value.qualifier">
      <path value="Observation.value.qualifier" />
      <short value="qualifier" />
      <definition value="This value MAY contain zero or more [0..*] qualifier (CONF:4515-31870)." />
      <min value="0" />
      <max value="*" />
    </element>
    <element id="Observation.value.translation">
      <path value="Observation.value.translation" />
      <slicing>
        <rules value="open" />
      </slicing>
      <definition value="This value MAY contain zero or more [0..*] translation (CONF:4515-16749) such that it" />
    </element>
    <element id="value.Observation.value.translation:translation1">
      <path value="Observation.value.translation" />
      <sliceName value="translation1" />
      <short value="translation" />
      <definition value="This value MAY contain zero or more [0..*] translation (CONF:4515-16749) such that it" />
      <min value="0" />
      <max value="*" />
    </element>
    <element id="value.Observation.value.translation:translation1.code">
      <path value="Observation.value.translation.code" />
      <sliceName value="translation1" />
      <short value="code" />
      <definition value="MAY contain zero or one [0..1] @code (CodeSystem: ICD-10-CM urn:oid:2.16.840.1.113883.6.90 STATIC) (CONF:4515-16750)." />
      <min value="0" />
      <max value="1" />
      <constraint>
        <key value="4515-32952" />
        <severity value="error" />
        <human value="When the Problem is Social Determinant of Health Observation, the observation/value/translation SHOULD be an ICD10 code selected from ValueSet Social Determinant of Health Conditions 2.16.840.1.113762.1.4.1196.788 DYNAMIC (CONF:4515-32952)." />
      </constraint>
    </element>
    <element id="Observation.author">
      <path value="Observation.author" />
      <short value="author" />
      <definition value="SHOULD contain zero or more [0..*] Author Participation (identifier: urn:oid:2.16.840.1.113883.10.20.22.4.119) (CONF:4515-31147)." />
      <min value="0" />
      <max value="*" />
      <type>
        <code value="http://hl7.org/fhir/cda/StructureDefinition/Author" />
        <profile value="http://hl7.org/cda/us/ccda/StructureDefinition/2.16.840.1.113883.10.20.22.4.119" />
      </type>
    </element>
    <element id="Observation.entryRelationship">
      <path value="Observation.entryRelationship" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="act" />
        </discriminator>
        <discriminator>
          <type value="value" />
          <path value="typeCode" />
        </discriminator>
        <rules value="open" />
      </slicing>
      <definition value="MAY contain zero or more [0..*] entryRelationship (CONF:4515-33012) such that it" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship1">
      <path value="Observation.entryRelationship" />
      <sliceName value="entryRelationship1" />
      <short value="entryRelationship" />
      <definition value="MAY contain zero or one [0..1] entryRelationship (CONF:4515-9059) such that it" />
      <min value="0" />
      <max value="1" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship1.typeCode">
      <path value="Observation.entryRelationship.typeCode" />
      <sliceName value="entryRelationship1" />
      <short value="typeCode" />
      <definition value="SHALL contain exactly one [1..1] @typeCode=&quot;SUBJ&quot; Has subject (CodeSystem: HL7ActRelationshipType urn:oid:2.16.840.1.113883.5.1002 STATIC) (CONF:4515-9060)." />
      <min value="1" />
      <max value="1" />
      <patternString value="SUBJ" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship1.inversionInd">
      <path value="Observation.entryRelationship.inversionInd" />
      <sliceName value="entryRelationship1" />
      <short value="inversionInd" />
      <definition value="SHALL contain exactly one [1..1] @inversionInd=&quot;true&quot; True (CONF:4515-9069)." />
      <min value="1" />
      <max value="1" />
      <patternString value="true" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship1.observation">
      <path value="Observation.entryRelationship.observation" />
      <sliceName value="entryRelationship1" />
      <short value="observation" />
      <definition value="SHALL contain exactly one [1..1] Age Observation (identifier: urn:oid:2.16.840.1.113883.10.20.22.4.31) (CONF:4515-15590)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="http://hl7.org/fhir/cda/StructureDefinition/Observation" />
        <profile value="http://hl7.org/cda/us/ccda/StructureDefinition/2.16.840.1.113883.10.20.22.4.31" />
      </type>
    </element>
    <element id="Observation.entryRelationship:entryRelationship2">
      <path value="Observation.entryRelationship" />
      <sliceName value="entryRelationship2" />
      <short value="entryRelationship" />
      <definition value="MAY contain zero or one [0..1] entryRelationship (CONF:4515-29951) such that it" />
      <min value="0" />
      <max value="1" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship2.typeCode">
      <path value="Observation.entryRelationship.typeCode" />
      <sliceName value="entryRelationship2" />
      <short value="typeCode" />
      <definition value="SHALL contain exactly one [1..1] @typeCode=&quot;REFR&quot; Refers to (CodeSystem: HL7ActRelationshipType urn:oid:2.16.840.1.113883.5.1002) (CONF:4515-31531)." />
      <min value="1" />
      <max value="1" />
      <patternString value="REFR" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship2.observation">
      <path value="Observation.entryRelationship.observation" />
      <sliceName value="entryRelationship2" />
      <short value="observation" />
      <definition value="SHALL contain exactly one [1..1] Prognosis Observation (identifier: urn:oid:2.16.840.1.113883.10.20.22.4.113) (CONF:4515-29952)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="http://hl7.org/fhir/cda/StructureDefinition/Observation" />
        <profile value="http://hl7.org/cda/us/ccda/StructureDefinition/2.16.840.1.113883.10.20.22.4.113" />
      </type>
    </element>
    <element id="Observation.entryRelationship:entryRelationship3">
      <path value="Observation.entryRelationship" />
      <sliceName value="entryRelationship3" />
      <short value="entryRelationship" />
      <definition value="MAY contain zero or more [0..*] entryRelationship (CONF:4515-31063) such that it" />
      <min value="0" />
      <max value="*" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship3.typeCode">
      <path value="Observation.entryRelationship.typeCode" />
      <sliceName value="entryRelationship3" />
      <short value="typeCode" />
      <definition value="SHALL contain exactly one [1..1] @typeCode=&quot;REFR&quot; Refers to (CodeSystem: HL7ActRelationshipType urn:oid:2.16.840.1.113883.5.1002) (CONF:4515-31532)." />
      <min value="1" />
      <max value="1" />
      <patternString value="REFR" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship3.observation">
      <path value="Observation.entryRelationship.observation" />
      <sliceName value="entryRelationship3" />
      <short value="observation" />
      <definition value="SHALL contain exactly one [1..1] Priority Preference (identifier: urn:oid:2.16.840.1.113883.10.20.22.4.143) (CONF:4515-31064)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="http://hl7.org/fhir/cda/StructureDefinition/Observation" />
        <profile value="http://hl7.org/cda/us/ccda/StructureDefinition/2.16.840.1.113883.10.20.22.4.143" />
      </type>
    </element>
    <element id="Observation.entryRelationship:entryRelationship4">
      <path value="Observation.entryRelationship" />
      <sliceName value="entryRelationship4" />
      <short value="entryRelationship" />
      <definition value="MAY contain zero or one [0..1] entryRelationship (CONF:4515-9063) such that it" />
      <min value="0" />
      <max value="1" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship4.typeCode">
      <path value="Observation.entryRelationship.typeCode" />
      <sliceName value="entryRelationship4" />
      <short value="typeCode" />
      <definition value="SHALL contain exactly one [1..1] @typeCode=&quot;REFR&quot; Refers to (CodeSystem: HL7ActRelationshipType urn:oid:2.16.840.1.113883.5.1002) (CONF:4515-9068)." />
      <min value="1" />
      <max value="1" />
      <patternString value="REFR" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship4.observation">
      <path value="Observation.entryRelationship.observation" />
      <sliceName value="entryRelationship4" />
      <short value="observation" />
      <definition value="SHALL contain exactly one [1..1] Problem Status (identifier: urn:hl7ii:2.16.840.1.113883.10.20.22.4.6:2019-06-20) (CONF:4515-15591)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="http://hl7.org/fhir/cda/StructureDefinition/Observation" />
        <profile value="http://hl7.org/cda/us/ccda/StructureDefinition/2.16.840.1.113883.10.20.22.4.6" />
      </type>
    </element>
    <element id="Observation.entryRelationship:entryRelationship6">
      <path value="Observation.entryRelationship" />
      <sliceName value="entryRelationship6" />
      <short value="entryRelationship" />
      <definition value="MAY contain zero or more [0..*] entryRelationship (CONF:4515-32965) such that it" />
      <min value="0" />
      <max value="*" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship6.typeCode">
      <path value="Observation.entryRelationship.typeCode" />
      <sliceName value="entryRelationship6" />
      <short value="typeCode" />
      <definition value="SHALL contain exactly one [1..1] @typeCode=&quot;SPRT&quot; Has support (CodeSystem: HL7ActRelationshipType urn:oid:2.16.840.1.113883.5.1002) (CONF:4515-32968)." />
      <min value="1" />
      <max value="1" />
      <patternString value="SPRT" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship6.act">
      <path value="Observation.entryRelationship.act" />
      <sliceName value="entryRelationship6" />
      <short value="act" />
      <definition value="SHALL contain exactly one [1..1] Entry Reference (identifier: urn:oid:2.16.840.1.113883.10.20.22.4.122) (CONF:4515-32966)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="http://hl7.org/fhir/cda/StructureDefinition/Act" />
        <profile value="http://hl7.org/cda/us/ccda/StructureDefinition/2.16.840.1.113883.10.20.22.4.122" />
      </type>
    </element>
    <element id="Observation.entryRelationship:entryRelationship5">
      <path value="Observation.entryRelationship" />
      <sliceName value="entryRelationship5" />
      <short value="entryRelationship" />
      <definition value="MAY contain zero or more [0..*] entryRelationship (CONF:4515-32953) such that it" />
      <min value="0" />
      <max value="*" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship5.typeCode">
      <path value="Observation.entryRelationship.typeCode" />
      <sliceName value="entryRelationship5" />
      <short value="typeCode" />
      <definition value="SHALL contain exactly one [1..1] @typeCode=&quot;SPRT&quot; Has support (CodeSystem: HL7ActRelationshipType urn:oid:2.16.840.1.113883.5.1002) (CONF:4515-32955)." />
      <min value="1" />
      <max value="1" />
      <patternString value="SPRT" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship5.observation">
      <path value="Observation.entryRelationship.observation" />
      <sliceName value="entryRelationship5" />
      <short value="observation" />
      <definition value="SHALL contain exactly one [1..1] Assessment Scale Observation (identifier: urn:oid:2.16.840.1.113883.10.20.22.4.69) (CONF:4515-32954)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="http://hl7.org/fhir/cda/StructureDefinition/Observation" />
        <profile value="http://hl7.org/cda/us/ccda/StructureDefinition/2.16.840.1.113883.10.20.22.4.69" />
      </type>
    </element>
    <element id="Observation.entryRelationship:entryRelationship7">
      <path value="Observation.entryRelationship" />
      <sliceName value="entryRelationship7" />
      <short value="entryRelationship" />
      <definition value="MAY contain zero or more [0..*] entryRelationship (CONF:4515-33012) such that it" />
      <min value="0" />
      <max value="*" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship7.typeCode">
      <path value="Observation.entryRelationship.typeCode" />
      <sliceName value="entryRelationship7" />
      <short value="typeCode" />
      <definition value="SHALL contain exactly one [1..1] @typeCode=&quot;COMP&quot; has Component (CodeSystem: HL7ActRelationshipType urn:oid:2.16.840.1.113883.5.1002) (CONF:4515-33014)." />
      <min value="1" />
      <max value="1" />
      <patternString value="COMP" />
    </element>
    <element id="Observation.entryRelationship:entryRelationship7.act">
      <path value="Observation.entryRelationship.act" />
      <sliceName value="entryRelationship7" />
      <short value="act" />
      <definition value="SHALL contain exactly one [1..1] Date of Diagnosis Act (identifier: urn:hl7ii:2.16.840.1.113883.10.20.22.4.502:2022-06-01) (CONF:4515-33013)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="http://hl7.org/fhir/cda/StructureDefinition/Act" />
        <profile value="http://hl7.org/cda/us/ccda/StructureDefinition/2.16.840.1.113883.10.20.22.4.502" />
      </type>
    </element>
  </differential>
</StructureDefinition>